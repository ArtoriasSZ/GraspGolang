# 第 1 章　词法分析
***
**核心目标：首先转换将纯本文的代码转换成词法单元token的形式，然后转换成抽象语法树。需要两次转换表示形式**
## 定义词法单元Token
**这里的核心是去定义关键字，运算符，分隔符，标识符，常量**

定义这个最小的语法单元，需要去定义关键字，运算符，分隔符，标识符，常量。所以是在数据结构上定义TokenType词法单元的类型和string即literal字面量。

## 词法分析器lexer
**词法分析器lexer是整个编译器的核心，它将输入的文本转换成一系列的词法单元Token**

词法分析器将源代码作为输入，并输出对应的词法单元。词法分析器会遍历输入的字符，然后逐个输出识别出的词法单元。这个过程既无须用到缓冲区，也无须保存词法单元，只会用到一个名为NextToken()的方法来输出下一个词法单元。

首先是词法单元的数据结构。第一个是其输入源代码字符串，第二个是当前正在处理的词法单元，第三个是当前正在处理的词法单元，第四个是当前正在处理的词法单元的结束位置。

用两个“指针”来指向所输入的字符串，是因为词法分析器除了查看当前字符，还需要进一步“查看”字符串，即查看字符串中的下一个字符。readPosition始终指向所输入字符串中的“下一个”字符，position则指向所输入字符串中与ch字节对应的字符。

第一个辅助方法是readChar()，它将读取下一个字符，并将其存储在ch变量中。第二个辅助方法是unreadChar()，它将把ch变量中的字符重新放回readPosition所指向的位置。